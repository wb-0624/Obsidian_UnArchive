# AOP

## 概念



借助于IoC

重复的代码片段，抽象成对象，统一处理。相似位置使用相似的代码。

![AOP](AOP.excalidraw.md)

和平时使用的对象类（Student，Teacher，Admin）相比，更为抽象，某些相似位置的流程。保留核心的业务代码。核心业务和非业务代码的解耦合。

和函数的区别？

函数需要调用，AOP只需要配置。



## AOP术语

---

- 建议、通知(Advice)

在特定的连接点，AOP框架执行的动作。

| Advice          | Description                                                  |
| :-------------- | :----------------------------------------------------------- |
| Before          | 目标方法被调用前                                             |
| After           | 目标方法被调用后                                             |
| After-returning | 目标方法成功执行后                                           |
| After-throwing  | 目标方法抛出异常后                                           |
| Around          | 目标方法被调用前和调用后<br />决定这个方法什么时候执行，如何执行，是否执行。 |

使用建议时，使用最简单的。

- 连接点(Join point)

允许使用通知的地方，都算连接点。

包括方法调用前，调用后，返回，抛出异常等。

- 切点(Point cut)

你的一个类里，有15个方法，那就有几十个连接点，但是并不想在所有方法附近都使用通知，你只想让其中的几个，在调用这几个方法之前，之后或者抛出异常时干点什么，那么就用切点来定义这几个方法，让切点来筛选连接点，选中那几个你想要的方法。

Advice通过Point cut来连接和接入Join Point。

- 切面(Aspect)

通知和切入点组成切面。

定义，在哪些方法，什么时候进行通知。

- 引入(Introduction)

给一个现有的类，在不改变现有代码的情况下，添加方法或字段属性。

- 目标对象(Target object)

目标类，核心业务逻辑方法。

- AOP代理(AOP proxy)

一个类被AOP织入通知后，就产出了一个结果类，它是融合了原类和通知逻辑的代理类。

- 织入(Weaving)

将通知添加到目标类具体连接点上的过程。



## 实现

1. 创建切面类，需要声明@Aspect
2. 注入IoC
3. 目标方法和切面对象连接
   Join point，获取目标方法的包括名称，参数等数据。
4. 方法执行前，方法执行后等区分。